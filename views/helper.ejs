<% 
//Variables

//Llena el formulario con el objeto req
if(typeof req === 'undefined'){
    req = {
      nombreOrigen: 'Kevin',
      empresaOrigen: 'SoltekOnline',
      emailOrigen: '',
      telefonoOrigen: '6461234554',
      paisOrigen: 'MX',
      calleOrigen: 'Lázaro Cárdenas',
      numeroOrigen: '',
      cpOrigen: '22800',
      coloniaOrigen: 'Zona Centro',
      ciudadOrigen: 'Ensenada',
      estadoOrigen: 'BC',
      rfcOrigen: '',
      referenciaOrigen: '',
      nombreDestino: 'Luis',
      empresaDestino: '',
      emailDestino: '',
      telefonoDestino: '6462255448',
      paisDestino: 'MX',
      calleDestino: 'zapata',
      numeroDestino: '145',
      cpDestino: '80220',
      coloniaDestino: 'Guadalupe',
      ciudadDestino: 'PTE',
      estadoDestino: 'SI',
      rfcDestino: '',
      referenciaDestino: '',
      tipo: 'box',
      contenido: 'camisetas rojas',
      valor: '0',
      cantidad: '1',
      largo: '5',
      ancho: '5',
      alto: '5',
      peso: '5',
      seguro: '',
      firma: '',
      peligroso: ''
    }
}

//Functions
printObject = function(obj){
    if(typeof obj === 'undefined') return List;
    var openList = '<li class="list-group-item d-flex justify-content-between lh-condensed"><div><h6 class="my-0">';
    var middleList = '</h6><small class="text-muted">';
    var closeList = '</small></div></li>' 
    var List = '';
    obj.forEach(result => {
        Object.keys(result).forEach(key => {
        if(result[key]) {
            if(typeof result[key] !== 'object'){
                if(key === 'label') List += openList + '<a class="btn btn-primary stretched-link" target="_blank" href="' + result[key] + '" > Obtener guía del envío </a>' + middleList + key + closeList;
                else List += openList + result[key] + middleList + key + closeList;
            }
            else{
                printObject([result[key]]);
            }
        }})
    })
    return List;
}

createButton = function(carrier, service){
    return '<button type="submit" class="btn btn-primary" name="btnGenerar" id="btnGenerar" value ="'+carrier+','+service+'">\
                Generar\
            </button>';
}

createList = function(content, key){
    return '<li class="list-group-item d-flex justify-content-between lh-condensed">\
                <div>\
                    <h6 class="my-0">'+ content +'</h6>\
                    <small class="text-muted">'+ key + '</small>\
                </div>\
            </li>';
}

createHeader = function(count){
    return '<br><li class="list-group-item d-flex justify-content-between lh-condensed bg-secondary text-white">\
                    <div><h6 class="my-0">Cotización '+ count +'</h6></div>\
                </li>';
}

printQuotes = function(obj){
    var List = '';
    if(typeof obj === 'undefined') return List;

    //HTML elements
    var headStart = '<br><li class="list-group-item d-flex justify-content-between lh-condensed bg-secondary text-white"><div><h6 class="my-0">Cotización ';
    var headEnd = '</h6></div></li>';     
    var k = 1;
    for(var i=0;i<obj.length;i++){
        for(var j=0;j<obj[i].length;j++){
            Object.keys(obj[i][j]).forEach(key => {
                if(obj[i][j][key]) {
                    if(obj[i][j][key] !== 'No disponible'){
                        if(key === 'carrier') List += createHeader(k++);
                            List += createList(obj[i][j][key], key);
                        if(key === 'totalPrice')
                            List += createButton(obj[i][j]['carrier'], obj[i][j]['service']);
                    }
                }
            }) 
        }
    }
    return List;
}

printValue = function(field){
    if(typeof req === 'undefined') return "";
    if(field in req) return req[field];
}
checked = function(value){
    if(typeof req !== 'undefined') {
        if(req.tipo === value)
            return "checked";
    }
    return "";
}

//Logic

if(typeof disabled === 'undefined') {
    disabled = "";
}
if(typeof modal === 'undefined') {
    modal = "";
}
if(typeof modal_title === 'undefined') {
    modal_title = "";
}
%>